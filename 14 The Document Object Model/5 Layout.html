<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <title>Layout</title>

    </head>

    <body>
        <h1>Layout</h1>
        <p><span id="one"></span></p>
        <p><span id="two"></span></p>

        <script>
            function timer(name, action) {
                let start = Date.now(); // Current time in milliseconds
                action();
                console.log(name, "took", Date.now() - start, "ms");
            }
            timer("naive", () => {
                let target = document.getElementById("one");
                while (target.offsetWidth < 1500) {
                    target.appendChild(document.createTextNode("X"));
                }
            });
            timer("clever", function () {
                let target = document.getElementById("two");
                target.appendChild(document.createTextNode("XXXXX"));
                let singleX = Math.ceil(1500 / (target.offsetWidth/5));
                target.firstChild.nodeValue = "X".repeat(singleX);
            });
            // → naive took 60 ms
            // → clever took 1 ms
        </script>
    </body>

</html>